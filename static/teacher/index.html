<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <title>教师子系统</title>
    <link rel="stylesheet" href="/layui/css/layui.css"/>
    <link rel="stylesheet" href="/css/index.css"/>
    <link href="/layui/css/modules/layer/default/layer.css" rel="stylesheet"/>
</head>
<body>
<div class="layui-layout layui-layout-admin">
    <div class="layui-header layui-bg-cyan">
        <div class="layui-logo" style="color: #1E9FFF;font-size: 17px;">毕业设计管理系统-教师</div>
        <ul class="layui-nav layui-layout-left">
            <!--<li class="layui-nav-item"><a href="">课题管理</a></li>-->
            <!--<li class="layui-nav-item"><a href="">用户</a></li>-->
            <li class="layui-nav-item">
                <a href="javascript:;">课题管理</a>
                <dl class="layui-nav-child">
                    <dd><a href="javascript:;" data-url="publish" onclick="clearTopicId()">新建课题</a></dd>
                    <dd><a href="javascript:;" data-url="manager">查看课题</a></dd>
                    <dd><a href="javascript:;" data-url="manager">提交审核</a></dd>
                    <dd><a href="javascript:;">授权管理</a></dd>
                </dl>
            </li>
            <li class="layui-nav-item">
                <a href="javascript:;">其它系统</a>
                <dl class="layui-nav-child">
                    <dd><a href="">邮件管理</a></dd>
                    <dd><a href="">消息管理</a></dd>
                    <dd><a href="">授权管理</a></dd>
                    <dd><a href="/admin">管理员</a></dd>
                </dl>
            </li>
            <!--<li class="layui-nav-item">-->
                <!--&lt;!&ndash;<span class="layui-badge-dot"></span>&ndash;&gt;-->
                <!--<span class="layui-badge">9</span>-->
                <!--&lt;!&ndash;若点击进入所有信息的面板，悬浮则是阅读消息&ndash;&gt;-->
                <!--<a href="">&nbsp;&nbsp;消息-->
                    <!--<dl class="layui-nav-child">-->
                        <!--<dd><a href="">你提交的开题报告文档已经被导师审阅并回复了快去查看吧 &nbsp;&nbsp;2017-09-19 19:12:06</a></dd>-->
                        <!--<dd><a href="">提示1</a></dd>-->
                        <!--<dd><a href="">提示2</a></dd>-->
                    <!--</dl>-->
                    <!--&lt;!&ndash;<span class="layui-badge">9</span>&ndash;&gt;-->
                <!--</a>-->
                <!--&lt;!&ndash;消息只是提示，最多负责跳转，编辑就是在单个页面上&ndash;&gt;-->
            <!--</li>-->
        </ul>
        <ul class="layui-nav layui-layout-right">
            <li class="layui-nav-item">
                <a href="javascript:;">
                    <img src="/image/avatar/inspectocat.jpg" class="layui-nav-img"/>
                    <span id="nameT"></span>
                </a>
                <dl class="layui-nav-child">
                    <dd><a href="javascript:;" onclick="base()">基本资料</a></dd>
                    <!--<dd><a href="">安全设置</a></dd>-->
                    <dd><a href="javascript:;" onclick="logout()">注销登录</a></dd>
                </dl>
            </li>
        </ul>
    </div>
    <div class="layui-body main-body main-body-teacher">
        <!-- 内容主体区域 -->
        <iframe src="/teacher/init.html" style="width:100%;height:100%;" id="main_page"></iframe>
    </div>
    <div class="layui-footer footer-teacher">
        © kuangcp.mythos
    </div>
</div>
</body>
<script src="/js/jquery.min.js"></script>
<script src="/js/common/main-page.js"></script>
<script src="/layui/lay/modules/layer.js"></script>
<script src="/js/config/server.js"></script>
<script src="/js/common/login.js"></script>
<script src="/layui/layui.all.js"></script>
<script>
  checkRole('teacher');
  home('teacher');
  getTeacher('/'+sessionStorage.getItem('teacherId'), function (data) {
    $("#nameT").html(data.data.username);
  });
  if (sessionStorage.getItem('teacherId') !== null && sessionStorage.getItem('TeacherRole') === null) {
    getTeacher('/roles/' + sessionStorage.getItem('teacherId'), function (data) {
      console.log(JSON.stringify(data));
      if (data.code === '0') {
        sessionStorage.setItem('WHO', data.data);
      }
    }, function (data) {

    })
  }
  $(function () {
    $("[data-url]").on('click', function () {
      turn('teacher', $(this).data('url'))
    });
  });
  // 实例化后台界面的组件
  layui.use('element', function () {
    var element = layui.element;
  });

  function clearTopicId() {
    sessionStorage.removeItem('editId');
  }

  function base() {
    getTeacher('/'+sessionStorage.getItem('teacherId'), function (data) {
      var content = $("#profile").html();
      content = content.replace('username##VA', data.data.username);
      content = content.replace('teacherNo##VA', data.data.teacherNo);
      content = content.replace('email##VA', data.data.email);
      tip('个人资料', content);
    });
  }

  function tip(title, content) {
    return layer.open({
      title: title
      , type: 1
      , content: content
      , btnAlign: 'c'
      , resize: true
      , tipsMore: true
      , area: ['200px', '200px']
      // , btn: ['确认', '取消']
      , yes: function (index, layero) {
      },
      cancel: function () {
      }
    });
  }

</script>
<script type="text/html" id="profile">
    <i class="layui-icon" style="font-size: 25px; color: #1E9FFF;">&#xe612;</i>
    <label>姓名：</label>
    <label>username##VA</label>
    <hr>
    <i class="layui-icon" style="font-size: 25px; color: #1E9FFF;">&#xe60b;</i>
    <label>工号：</label>
    <label>teacherNo##VA</label>
    <hr>
    <i class="layui-icon" style="font-size: 25px; color: #1E9FFF;">&#xe609;</i>
    <label>邮箱：</label>
    <label>email##VA</label>
</script>
</html>